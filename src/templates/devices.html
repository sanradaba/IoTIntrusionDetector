<!DOCTYPE html>
<html lang="es">
    <head>
        <title>Dispositivos de red</title>
        <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.png') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-3.3.7.min.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
        <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="{{ url_for('static', filename='js/jquery-3.2.1.min.js') }}"></script>
        <script src="{{ url_for('static', filename='js/bootstrap-3.3.7.min.js') }}"></script> 
        
    </head>
    <body>
        
        <header>
            <h1>Detector de intrusiones IoT</h1>
        </header>
        <nav class="navbar navbar-expand-lg" style="height: 10;">
            <a href="/shutdown"><span class="glyphicon glyphicon-off"></span> Apagar</a>
            <a href="/"><span class="glyphicon glyphicon-refresh"></span> Refrescar</a> 
            <a href="/w_disable_all_monitor"><span class="glyphicon glyphicon-stop"> Desactivar monitorizaciones</span></a>
            <a href="/get_traffic"><span class="glyphicon glyphicon-download-alt"></span> Descargar tráfico</a>
        </nav> 

        <div  class="container text-center" style="height: 355px;  overflow-y: auto">
            <div class="row ">
                <div class="col-lg-3"><h4>Dispositivo</h4></div>
                <div class="col-lg-3"><h4>Características</h4></div>
                <div class="col-lg-3"><h4>Estado</h4></div>
                <div class="col-lg-3"><h4>Acciones</h4></div>
            </div>
            {% for device in devicesToShow.values() %}
            <div class="row">
                <div class="col-lg-3"><p>{{device['device_id']}}</p> {{device['device_vendor']}} {{device['device_name']}}</div>
                <div class="col-lg-3"><p>{{device['device_ip']}}</p> <p>{{device['device_mac']}}</p></div>
                <div class="col-lg-3"><p>{% if device['is_inspected'] %} <span class="glyphicon glyphicon-check"></span> Monitorizado{% else%} <span class="glyphicon glyphicon-signal"></span> Detectado{% endif %}</div>
                <div class="col-lg-3">{% if device['is_inspected'] %} <a href="/w_disable_inspection/{{device['device_id']}}"><span class="glyphicon glyphicon-stop"></span> Parar monitorizacion</a> {% else %} <a href="/w_enable_inspection/{{device['device_id']}}"><span class="glyphicon glyphicon-record"> Monitorizar</span></a>
                    {% endif %}</div>
            </div>
            {% endfor %}
        </div>
        
        <footer>
            <p>Detector de intrusiones IoT v. {{ version }}</p>
            <p><a href="mailto:sradio@uoc.edu" title="Autor: Santiago Radío Abal">sradio@uoc.edu</a></p>
        </footer> 
    </body>
</html>
